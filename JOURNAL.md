<!--
  ===================    !!READ THIS NOTICE!!   ====================
  DO NOT edit this file manually. Your changes WILL BE OVERWRITTEN!
  This journal is auto generated and updated by Hack Club Blueprint.
  To edit this file, please edit your journal entries on Blueprint.
  ==================================================================
-->

This is my journal of the design and building process of **BeanBike**.  
You can view this journal in more detail on **Hack Club Blueprint** [here](https://blueprint.hackclub.com/projects/396).


## 10/10/2025 5 PM - Started KiCad Project  

Didn't really do a lot, just started the KiCad Project and labeled all the MCU pins for the controller.

![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTUxMywicHVyIjoiYmxvYl9pZCJ9fQ==--a9143516e9c36189a78fa9728de7c93dc4bf3c46/image.png)


Well, pretty much it, but I need 250 characters, so I will talk about blueprint. I kinda am liking it, it is obviously a continuation of Highway, but I like it. Ngl kinda feels unoriginal, but I still like it. 

It is basically Highway, but with some parts of SoM and more refined.  

## 10/10/2025 8 PM - Finished V1 Power Circuit  

I basically made the schematic for the power supply.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTUzNCwicHVyIjoiYmxvYl9pZCJ9fQ==--8241470e2299ee4d2047ad70ae19330d94f9d8c5/image.png)
Most of the time was spent researching and seeing what I had to do to make sure it is safe and everything gets what it wants. I am debating getting the Power on a different board, but I don't think I will.
But now I have battery level, 3.3v (MCU), 5v (display), 12v (misc like lights). 
I made a more complex circuit, but then I realized eBike batteries already have a BMS ðŸ˜­ so I got rid of it.
So far, kinda liking this, but I am dreading the day I have to make a case, especially waterproof :(  

## 10/10/2025 9 PM - Added Connectors  

I went through and did all the tedious work of creating the connectors. 
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTU0MywicHVyIjoiYmxvYl9pZCJ9fQ==--e89d0bf58e68c16cda045891f44fc5b6902c0a66/image.png)
I was also thinking about the features I am going to add specifically for anti-theft. I want to have enough smart anti-theft features that you don't need to lock your bike up. So I will have things like PIN, Phone detection to make sure you can ride it. To make sure that if you do try to steal it, you won't be able to, I will lock the motor, start an alarm, pretty much cut power, other than to the anti-theft features, oh, and also GPS. So this would be effective, but thieves could still pick it up, take out the battery, and other things so I will probably still carry one around, but for those times when you forget it, then you can still be calm knowing your bike won't get stolen.  

## 10/11/2025 1 PM - Motor Controller  

I finished the Motor connection and etc.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTY0MCwicHVyIjoiYmxvYl9pZCJ9fQ==--03ccd02f88be4c9362fb244c248106f154a25d63/image.png)
So I used a BLDC motor IC for easy controlling and etc. Honestly I don't get why eBike controller are so expensive this seems down right resonable.
When I brake it will now automatically cut power to the motor no matter what (Hard wired) and I can control it with firmware too. So now I am going to go through and finish a few things then I will test it in a simulation and then I should be good to go to the PCB.  

## 10/11/2025 4 PM - Footprints  

I hate selecting footprints; let's make that clear right now, I hate it.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTY3MCwicHVyIjoiYmxvYl9pZCJ9fQ==--02d80125252332b05c6f6fb64ecf9d814c531c28/image.png)
I ran the ERC and fixed all those problems, and I moved to selecting the footprints. I got a list on Digi-Key for all my parts, but I hate this still. A big, big problem I am facing right now is that I need 3 buck converters for 3.3v, 5v, and 12v. Someone suggested going from 12v to 5v then to 3.3v so I will try that.  

## 10/11/2025 7 PM - 48v -> 24v  

Ok for the past 2 hours I have been working on the buck converters.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTY5OSwicHVyIjoiYmxvYl9pZCJ9fQ==--883f798163d37c0d06bf2b47560470d24ca28e1a/image.png)
Tell me why it is so hard to just go down to a lower voltage doesn't make sense but whatever. I spent1.5 hours trying to make my own but the n I came across a actual life saver [webench.ti.com/power-designer](webench.ti.com/power-designer). I got done my 24v converter and now the rest  

## 10/11/2025 8 PM - Finished V1 Schematic  

I finally finally finished V1 of my motor controller!
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTcxOSwicHVyIjoiYmxvYl9pZCJ9fQ==--e81ce31382838081d9f66ed0659053e2d6eead8b/image.png)
You know how earlier I said I don't get why motor controllers are so expensive? Yeah, I take that back. I finished all the conversions and now have 24v, 12v, 5v, and 3.3v available to me, all at around 2.5A. I thought the inductors would've made this huge, but ehh, I am estimating around 100mm by 90mm. Then, to top it all off, I did footprints my favorite.  

## 10/12/2025 3 PM - Started PCB  

I started on the PCB.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTg2OCwicHVyIjoiYmxvYl9pZCJ9fQ==--89756bc4c9c01c7c5119c1e327a72a686d879c30/image.png)
I started by grouping the components into sections of the board, like one group for power, one for motor, one for connectors, and one for the MCU. I then combined them into a compact layout, drew my edge cuts, and started plotting traces. I have done most of the power, and now I am on data. The board will have 4 layers, front and back for power, and the middle layers for data. After I finish it, I will probably ask someone to review it because this is my first PCB with a lot of current, and I need it to be safe.  

## 10/12/2025 9:29 PM - Finished V1 PCB  

I finished routing all the PCB, and it should be good!
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTkxOSwicHVyIjoiYmxvYl9pZCJ9fQ==--72c7977c4bda1612ea090db430647902a0f86e98/image.png)
To be honest, I am not that confident, so that is why I am getting it reviewed by someone a lot smarter than me. This feels really nice to get done. I would say this is the hardest part; it should all be smooth sailing from here. And best of all, software is next! Oh, also, I forgot to run to DRC, guess I have to do that :( I really hate all the repetitive work of making PCBs like it is fun until you get to that part.  

## 10/12/2025 9:48 PM - Quick Update: DRC & Silkscreen  

Quick update: I fixed DRC violations and added silk screen text.  
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTkyMSwicHVyIjoiYmxvYl9pZCJ9fQ==--3a524b9488808c1dd136c4c42497d863675c9223/image.png)
I don't think I am done with it completely. I still have to add all the part numbers, but really, I already have them picked out; I just need to put them in and generate the BOM and Gerbers. It is easy but repetitive. Welp, see you then  

## 10/14/2025 - PCB v2  

I have done alot of research and getting feedback.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MjI1NiwicHVyIjoiYmxvYl9pZCJ9fQ==--d4da2f98b9ea5b46ba5ad298e70d54c87835423a/image.png)
I have gotten feedback on my PCB and how not to burn down my house. I need to majorly increase the track width but I have decided to just up my board to 6 layers and it would be like this. Back:Solid GND In4:PWR_MOTOR then the rest is yet to be decided but that is what is new. Then in v1 signals were being passed from one area to another (mostly at connectors) so I am fixing that. I felt it would be easier to just redo the routing and as a perk I can make it neater.  

## 10/15/2025 - Layout PCB v2  

I have laid out all of PCB v2 this time, taking a lot more care into it.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MjQxOCwicHVyIjoiYmxvYl9pZCJ9fQ==--51fb2eb957b323b2416679f8a18b720a91a96e1b/image.png)
I have decided to omit the 24V and 12V lines. Really, I had no use for them other than lights, but after seeing how expensive wired-in lights are, I decided against it. The PCB is split into 3 parts now: MCU, Power, and Motor. I am still deciding whether to arrange it vertically or more horizontally, but I am thinking vertically.  

## 10/16/2025 6 PM - Issues  

Well, I laid out my PCB v2, and it's all good, but there is an issue.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MjU0NywicHVyIjoiYmxvYl9pZCJ9fQ==--5e7ac3b7661c56ba94f7b6e6dff487882c250a19/image.png)
So I laid out my PCB, it was all nice and neat, but ... I just now realized that the chip I was using the DRV8308 does not support 48v :(. So I have to replace it. I am replacing it with the DRV8353. It is a newer chip and supports 48v. But I really do not want to change everything.  

## 10/16/2025 9 PM - Updated Motor IC  

So after a lot, I finally got the motor IC all updated.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MjU2MywicHVyIjoiYmxvYl9pZCJ9fQ==--7aca53cf954b7236a22347976da6a951a3997245/image.png)
It was a lot, but I think I finally have this all down, and it feels so nice. One good thing happened, though I had the MOSFETs mixed up, so that would not have been good. I rearranged the GPIOs to make it fit a lot better. I also got to get rid of the level shifters, and I feel it is a lot less complex.  

## 10/18/2025 - PCB v2  

I routed a placed everything on PCB v2 and it should be finished.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzExMiwicHVyIjoiYmxvYl9pZCJ9fQ==--374cd558e1936bfda9d718b1a325a3058ea63345/image.png)
Been a while. But I finished everything on PCB v2 (except silkscreen). I placed all the new components updated it and all nice and neat. I added copper fills for connecting my high-power things so I don't have to worry about big traces. But anyway, now I am getting it reviewed once again to make sure it is very good.  

## 10/19/2025 11 AM - Finish PCB v2  

I had a problem with my PCB, but I fixed it, and now v2 is officially finished.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzM5MiwicHVyIjoiYmxvYl9pZCJ9fQ==--80aeae5ce28ee01168b97e2b7e07c51e8dc029dc/image.png)
In my PCB, there were some isolated copper islands, so I had to fix that by re-routing some of the PCB. This should be the actual PCB that I send to JLC PCB. Now I'm going to make the firmware, and it shouldn't be too hard. Altough I have never interacted with a SPI device without a library so that will take a bit.  

## 10/19/2025 3 PM - DRV8353 implementation  

I am finally working on firmware!
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzQ5MSwicHVyIjoiYmxvYl9pZCJ9fQ==--20ec2375586308a90d845129184ca8e4d080ea64/image.png)
Right now, I am working on the DRV8353 implementation. I have Fault detection working. For everywhere you see uart.sendData(), that is me sending data to my display (the smart thing) to see what it will decide to do with it. At first, I was a little nervous because I had never read/write raw registries from SPI, but it is kind of easy. Oh, and I also set up an interrupt on the FAULT pin to make sure I catch all faults instantly. Next up is Driver Control.  

## 10/19/2025 8 PM - Finished DRV8353 implementation  

I finished the DRV8353 implementation.
![image.png](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MzU4NSwicHVyIjoiYmxvYl9pZCJ9fQ==--aab45e828bd38e1064ff4453d20c8568d506969e/image.png)
Note, this does not mean that my controller firmware is done, just that the code to interface with the DRV8353 is done. Anyway, I added a bunch of functions to control all the different registries. Next, I have to make the motor control code (PAS, Cruise Control, actually sending PWM signals, getting motor speed, etc.).
  

